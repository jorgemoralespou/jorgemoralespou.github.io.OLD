<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!-- begin SEO -->
    <title>Learn the Origin</title>
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Learn the Origin">
    <meta property="og:title" content="Learn the Origin">
    <link rel="canonical" href="http://jorgemoral.es/">
    <meta property="og:url" content="http://jorgemoral.es/">
    <meta name="twitter:site" content="@UnPOUcoDe">
    <meta name="twitter:title" content="Learn the Origin">
    <meta name="twitter:description" content="Touching containers, orchestration and application development properly mixed with a little touch of real life experience">
    <meta name="twitter:url" content="http://jorgemoral.es/">
    <meta name="twitter:card" content="summary">
    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Person",
            "name": "Jorge Morales Pou",
            "url": "http://jorgemoral.es",
            "sameAs": ["https://twitter.com/UnPOUcoDe", "https://www.linkedin.com/in/jorgemoralespou", "https://github.com/jorgemoralespou"]
        }
    </script>
    <!-- end SEO -->
    <link href="http://jorgemoral.es/feed.xml" type="application/atom+xml" rel="alternate" title="Learn the Origin Feed">
    <title>jorgemoral.es ::
        Home
    </title>
    <!--
    <link rel="stylesheet" href="/css/stylesheet.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    -->
    <meta name="generator" content="Nanoc 4.7.5">

    <!-- For all browsers -->
    <link rel="stylesheet" href="/css/main.css">
    <meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->
    <!-- insert favicons. use http://realfavicongenerator.net/ -->
    <link rel="stylesheet" href="/css/asciidoc-pygments.css">
</head>

<body  class="layout--single">
    <div class="masthead">
        <div class="masthead__inner-wrap">
            <div class="masthead__menu">
                <nav id="site-nav" class="greedy-nav">
                    <button><div class="navicon"></div></button>
                    <ul class="visible-links">
                        <li class="masthead__menu-item masthead__menu-item--lg"><a href="/">Learn the Origin</a></li>
<!-- UNCOMMENT WHEN IMPLEMENTED
                        <li class="masthead__menu-item"><a href="/categories">Categories</a></li>
-->
<!-- UNCOMMENT WHEN IMPLEMENTED
                        <li class="masthead__menu-item"><a href="/tags">Tags</a></li>
-->
<!-- UNCOMMENT WHEN IMPLEMENTED
                        <li class="masthead__menu-item"><a href="/all-posts">All posts</a></li>
-->
                        <!--
                        <li class="masthead__menu-item"><a href="/year-archive">By year</a></li>
                        -->
<!-- UNCOMMENT WHEN IMPLEMENTED
                        <li class="masthead__menu-item"><a href="/presentations">Presentations</a></li>
-->
<!-- UNCOMMENT WHEN IMPLEMENTED
                        <li class="masthead__menu-item"><a href="/conferences">Conferences</a></li>
-->
                        <li class="masthead__menu-item"><a href="/about">About me</a></li>
                    </ul>
                    <ul class="hidden-links hidden"></ul>
                </nav>
            </div>
        </div>
    </div>

<!--  USE Breadcrumbs Helper

    <nav class="breadcrumbs">
      <ol itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
              <a href="http://jorgemoral.es/" itemprop="item"><span itemprop="name">Home</span></a>
              <meta itemprop="position" content="1" />
            </li>
            <span class="sep">/</span>
            <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
              <a href="http://jorgemoral.esdevexp" itemprop="item"><span itemprop="name">Devexp</span></a>
              <meta itemprop="position" content="2" />
            </li>
            <span class="sep">/</span>
            <li class="current">Configuring your application, Part 2</li>
      </ol>
    </nav>
-->

    <div id="main" role="main">
        <div class="sidebar sticky">
            <div itemscope itemtype="http://schema.org/Person">
                <div class="author__avatar">
                    <img src="/images/bio-photo.jpg" class="author__avatar" alt="Jorge Morales">
                </div>
                <div class="author__content">
                    <h3 class="author__name">Jorge Morales</h3>
                    <p class="author__bio">OpenShift Field Product Manager and Developer Advocate working for Red Hat.<br/>Drop me a tweet if you want me to blog about a topic</p>
                </div>

                <div class="author__urls-wrapper">
                    <button class="btn btn--inverse">Follow</button>
                    <ul class="author__urls social-icons">
                        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Madrid, Spain</li>
                        <li><a href="https://twitter.com/UnPOUcoDe"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
                        <li><a href="https://github.com/jorgemoralespou"><i class="fa fa-fw fa-github-square" aria-hidden="true"></i> GitHub</a></li>
                        <li><a href="https://gitlab.com/jorgemoralespou"><i class="fa fa-fw fa-github-square" aria-hidden="true"></i> GitLab</a></li>
                        <li><a href="https://www.linkedin.com/in/jorgemoralespou"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
                    </ul>
                </div>
            </div>
        </div>

        
<div class="archive">
    <h1 class="page__title"></h1>
    <p></p>
    <h3 class="archive__subtitle">Recent Posts</h3>
    
       <div class="list__item">
           <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
               <h2 class="archive__item-title" itemprop="headline"><a href="/2017/04/developing-locally-openshift-minishift/">Developing locally with OpenShift - minishift, bringing it all together</a></h2>
               <p class="page__meta">
                  <i class="fa fa-clock-o" aria-hidden="true"></i> 4 minutes
                  Posted: 08/Apr/2017 by Jorge Morales
               </p>
               <p class="archive__item-excerpt" itemprop="description">In this last post I'm introducing what is the definitive tool for working with OpenShift locally and where we'll be investing moving forward.</p>
               <!--
               <p class="archive__item-excerpt" itemprop="description"><div class="paragraph">
<p>We finally get to the last post of the series, and in this post I will introduce you to the tool that Developers will be using soon. It’s still not final and yet many features need to be planned and included, but will overcome all the problems I described in my previous posts.</p>
</div>
<div class="paragraph">
<p>There’s already a good blog post from <a href="https://github.com/LalatenduMohanty">Lalatendu Mohanty</a> about <a href="https://developers.redhat.com/blog/2017/02/28/using-red-hat-container-development-kit-3-beta/">what CDKv3 is</a> so I will not go into many details. I will just simply quote him for what I consider the most important part:</p>
</div>
<div class="paragraph">
<p>“Minishift is a fork of the Minikube project and uses libmachine to interact with the underlying virtualization software. It also uses OpenShift’s “cluster up” functionality for provisioning the local Origin/OCP cluster”</p>
</div>
<div class="paragraph">
<p>Also:</p>
</div>
<div class="paragraph">
<p>“At the moment, KVM, Virtualbox, Xhyve and HyperV are the supported hypervisors.”</p>
</div>
<div class="paragraph">
<p>You should note that from this 2 sentences there is so many relevant things to mention:</p>
</div>
<div class="paragraph">
<p>First, and foremost, the tool runs in a virtual machine, providing isolation from the host. Also, the support for the most common virtualization technologies across all major Operating Systems, providing consistency on where minishift can be run. And finally, minishift uses internally “oc cluster up” which is the preferred way to bootstrap a local cluster.</p>
</div>
<div class="paragraph">
<p>One of the key aspects of minishift is that it is a tool created with developers in mind, so most of the shortcomings that “oc cluster” provides are meant to be overtaken by minishift. But, not only is a tool for developers, it’s also a tool to have reproducible OpenShift local environments. This aspect is key for some alternative use cases, like teaching or showing OpenShift capabilities in a reproducible manner. Evangelism of OpenShift will greatly benefit from the sweetness that minishift provides.</p>
</div>
<div class="paragraph">
<p>As an example of things that are or will be shortly possible:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reuse downloaded images from VM to VM</p>
</li>
<li>
<p>Provision a set of addons/bundles upon cluster creation</p>
</li>
<li>
<p>Modify cluster default behavior</p>
</li>
<li>
<p>Provide multiple openshift instances/profiles</p>
</li>
<li>
<p>Ability to pack and transfer files required to have a working environment</p>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_how_to_get_started">How to get started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To work with minishift is as easy as it is to work with “oc cluster”. It’s a single go binary compiled for the different major developers operating systems (Windows, Mac and Linux). The only pre-requirement is that you have any of the supported virtualization technologies available on your workstation. Once you have the binary downloaded, and for convenience, added to the path, you can just issue one command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ minishift start</pre>
</div>
</div>
<div class="paragraph">
<p>This command, which accepts a variety of configuration flags, does all you need to have OpenShift up and running. It will pull down a boot-2-docker iso (there’s also Centos and RHEL variants), it will create a VM using that iso image, and will do “oc cluster up” within the VM, with the appropriate configuration. After all the images have been pulled down (which can take a while) you’ll have a complete OpenShift all in one cluster running in a VM.</p>
</div>
<div class="paragraph">
<p>Once you finish working, you just need to stop the VM, by doing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ minishift stop</pre>
</div>
</div>
<div class="paragraph">
<p>Note that this will keep the VM in your workstation, so you can start and stop it several times being sure that your work will be preserved.</p>
</div>
<div class="paragraph">
<p>Once you’re done, you can discard the VM and recover all used disc space, by doing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ minishift delete</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusions">Conclusions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although minishift has not even hit version 1.0.0 GA it is already one of the easiest ways to work with Openshift locally. But the truth is that if the present is encouraging the future is promising, and we will see a great deal of capabilities being added moving forward that will keep simplifying developers life, so that a regular developer will not need to know how to install, manage, configure and operate and OpenShift cluster and will be able to keep focus in what should be important to him, develop applications that will ultimately run on an OpenShift cluster.</p>
</div>
<div class="paragraph">
<p>I have to say that these past months where I’ve been working with the minishift team, they have proved that “being the tool of choice for developers” is their main goal, and they have been listening to all the feedback from the community to make the experience as easy as possible. I want to thank <a href="https://github.com/hferentschik">Hardy Ferentschik</a>, <a href="https://github.com/LalatenduMohanty">Lalatendu Mohanty</a>, <a href="https://github.com/praveenkumar">Praveen Kumar</a>, <a href="https://github.com/budhrg">Budh Ram Gurung</a>, <a href="https://github.com/gbraad">Gerard Braad</a>, and the rest of the <a href="https://github.com/minishift/minishift/graphs/contributors">minishift team</a>, and also specially <a href="https://github.com/jimmidyson">Jimmy Dyson</a> who started this project.</p>
</div>
</div>
</div></p>
               -->
           </article>
       </div>
    
       <div class="list__item">
           <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
               <h2 class="archive__item-title" itemprop="headline"><a href="/2017/04/developing-locally-openshift-oc-cluster/">Developing locally with OpenShift - “oc cluster up”, the fastest way to get a local cluster</a></h2>
               <p class="page__meta">
                  <i class="fa fa-clock-o" aria-hidden="true"></i> 10 minutes
                  Posted: 07/Apr/2017 by Jorge Morales
               </p>
               <p class="archive__item-excerpt" itemprop="description">In this 3rd blog in the series, we're exploring what is the fastest way to stand up an OpenShift cluster for development, and I'll introduce you to a tool that I've created for experimentation on additional use cases</p>
               <!--
               <p class="archive__item-excerpt" itemprop="description"><div class="paragraph">
<p>Some time after we launched, we realized how easy it was to run OpenShift itself as a Docker container, as that’s one of the possible ways to install and run OpenShift. Our lead architect, <a href="https://github.com/smarterclayton/">Clayton Coleman</a>, realized that since every developer will probably have the “oc” (OpenShift client) client tool available on their machines, it could be very easy to add some behaviour to that client to bootstrap a local OpenShift instance. This is how he came with the command cluster and the options up and down.</p>
</div>
<div class="paragraph">
<p><strong>“oc cluster up”</strong> will start an openshift all-in-one Docker container on your workstation and it will do some bootstrapping to make it usable. With the command comes many switches so that the behaviour can be customized.</p>
</div>
<div class="paragraph">
<p><strong>“oc cluster down”</strong> will stop that container and remove any configuration used by it.</p>
</div>
<div class="paragraph">
<p>A subsequent start of a cluster, again with “oc cluster up” will bring up a fresh new cluster. This means that the cluster that you have started is not persisted by default, unless one uses the switch “--keep-config” that will preserve the configuration upon restarts.</p>
</div>
<div class="paragraph">
<p>How does “oc cluster” works? It runs an origin (or ocp) Docker container natively and then it does some bootstrapping to provide some initial configuration. Wait? Did I say a Docker container natively? Yes. This means that for Windows and Mac users you’ll need to use either Docker for Windows or Docker for Mac respectively. Docker for Windows and Docker for Mac uses lightweight virtualization (hyper-V and xhyve respectively) and start a Boot-2-Docker VM, that is very small in size (around 35 MB).</p>
</div>
<div class="sect1">
<h2 id="_how_to_get_started">How to get started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download the oc client from <a href="https://github.com/openshift/origin/releases">origin releases</a> (lookup for the latest stable)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/images/developing_locally_openshift/origin_releases.png" alt="Origin releases">
</div>
</div>
<div class="paragraph">
<p>Next, start the cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc cluster up</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/images/developing_locally_openshift/insecure_registry_error.png" alt="Insecure registry error">
</div>
</div>
<div class="paragraph">
<p>You’ll get a warning about the registry. Just add the registry to the list of insecure registries of your Docker installation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/images/developing_locally_openshift/add_registry.png" alt="Add registry">
</div>
</div>
<div class="paragraph">
<p>At this point you have a fully functional openshift cluster up and running and available to you. The OpenShift console address is displayed in the output messages, but can also be queried by issuing the following command: at “oc whoami --show-server”. On the startup log there will also be user related information.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/images/developing_locally_openshift/cluster_started.png" alt="Add registry">
</div>
</div>
<div class="paragraph">
<p>When you’re done working, just do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc cluster down</code></pre>
</div>
</div>
<div class="paragraph">
<p>There’s a lot of command line switches to customize the cluster behavior. Starting a cluster for a different origin version or configuring proxies for your cluster are some of the things that can be easily configured.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_evolution">Evolution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>“oc cluster” started as a way for OpenShift engineers to have a cluster up to test their work and soon became the easier way to start a cluster. It was first introduced in 1.3 and it has been adding some features on every release, although just the minimal required features for the intended goal. OpenShift version 1.4/3.4 introduced the ability to bootstrap a proxy and some other behavioral changes. OpenShift 1.5/3.5 will introduce Persistent Volumes, so anytime a cluster is bootstrapped, 100 PV will be created and available for the developer to use.
There is a lot of <a href="https://github.com/openshift/origin/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20in%3Atitle%20%22oc%20cluster%22%20">work going</a> into the tool.
Although many engineers have contributed to this tool, most of the work has been done by <a href="https://github.com/csrwng/">Cesar Wong</a>. So my most sincere kudos to Cesar for his amazing work.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_is_it_enough">Is it enough?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let’s start by saying that I love “oc cluster” as it gives an easy way to bootstrap a cluster based of a Docker container. This is the fastest way to get a cluster up and running. It only requires you to have the oc client, which if you use OpenShift at all you will already have it. And it’s easy to learn. You just need to remember 2 commands “oc cluster up” and “oc cluster down”.
On the contrary, I have to say that the default behavior does not make developing applications for that local OpenShift environment agile, as you’ll most likely not use the default behavior and will need to always provide command line switches.</p>
</div>
<div class="paragraph">
<p>The goal of this tool is not to provide a local, reusable, development environment, for those that develop applications that will run on OpenShift. It just provides a fast way to have a cluster available. In many cases, this will be sufficient, but not for me, and what I’m looking for as developer of applications for OpenShift.</p>
</div>
<div class="paragraph">
<p>The workflow I look for as a developer of applications for Openshift should look like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start an env</p>
</li>
<li>
<p>Work on it</p>
</li>
<li>
<p>Stop an env</p>
</li>
<li>
<p>Start another env</p>
</li>
<li>
<p>Bootstrap it differently for that project</p>
</li>
<li>
<p>Stop that env</p>
</li>
<li>
<p>Start, develop, stop</p>
</li>
<li>
<p>Destroy a no longer needed env.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This has been the main motivation for me to start a side project, a bash script that wraps “oc cluster” and gives me the workflow I’m looking for. The script is named “oc-cluster” and is <a href="https://github.com/openshift-evangelists/oc-cluster-wrapper">available on GitHub</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="__oc_cluster_wrapper_gaining_experience_with_developers">“oc-cluster” wrapper: Gaining experience with developers.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the process of creating this tool I have done many experimentation on what would be the common bootstrapping that I would require so I have provided a mechanism to configure anything else that I don’t consider basic in an easy way than what is provided out of the box. There is a plugin mechanism that allows all these add ons to be installed on demand and they can be easily shared between different people.</p>
</div>
<div class="paragraph">
<p>The mechanics are the same as the base “oc cluster”, but it provides a default additional parameter which is the name of the cluster to start. This allows the developer to have multiple clusters created and start/stop the one with the work/add ons they want.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster up [PROFILE]</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/images/developing_locally_openshift/oc-cluster_up.png" alt="oc-cluster up">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster stop</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/images/developing_locally_openshift/oc-cluster_down.png" alt="oc-cluster down">
</div>
</div>
<div class="paragraph">
<p>This is all you need to know, but as I have introduced the concept of profiles, you can then list the available clusters to decide which one you want to start in case you don’t remember the name.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/images/developing_locally_openshift/oc-cluster_list.png" alt="oc-cluster list">
</div>
</div>
<div class="paragraph">
<p>Also, as the clusters are now long lived, you will be able to completely delete the cluster if you’re not going to work with it any more.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts/images/developing_locally_openshift/oc-cluster_destroy.png" alt="oc-cluster destroy">
</div>
</div>
<div class="paragraph">
<p>The tool has a lot of features targeting make developing on openshift easy, so if you want more information in how this tool works and all the capabilities it has, I recommend you to read the <a href="https://github.com/openshift-evangelists/oc-cluster-wrapper/blob/master/README.adoc">README.adoc in GitHub</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusions">Conclusions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>“oc cluster” it’s an awesome tool to get a cluster up and running, but it really don’t fulfill all my expectations for using it as my local development environment for a day to day development tool. That is the reason has has driven me to create a tool on top.</p>
</div>
<div class="paragraph">
<p>The biggest advantage of this tool that created on top is that it totally adjusts to my workflow and expectations, as it is developed by me ;-), and it’s developed in my free time. Windows is not supported as bash does not run there natively.
There’s an alternative to this script, written by <a href="https://github.com/GrahamDumpleton">Graham Dumpleton</a>, written in Python, which supports Windows as well as MacOS X and Linux, called <a href="https://github.com/getwarped/powershift-cluster">Powershift</a>.</p>
</div>
<div class="paragraph">
<p>This side project has been mainly developed to make my daily life easier, but by sharing it, I’ve been collecting a big understanding on what users would expect when working with OpenShift locally, either for development or for any other purpose, like demos or even evangelism.
All this feedback is being constantly shared with the people working on “oc cluster” and “minishift”, to make continuously improve these tools, as these are officially provided by Red Hat.</p>
</div>
<div class="paragraph">
<p>What’s <strong>minishift</strong>? <strong>minishift</strong> is the definitive tool for local OpenShift for development. If you want to know more, don’t forget to read the final blog in this series.</p>
</div>
</div>
</div></p>
               -->
           </article>
       </div>
    
       <div class="list__item">
           <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
               <h2 class="archive__item-title" itemprop="headline"><a href="/2017/04/developing-locally-openshift-origin-all-in-one/">Developing locally with OpenShift - Origin all in one. Where we started</a></h2>
               <p class="page__meta">
                  <i class="fa fa-clock-o" aria-hidden="true"></i> 4 minutes
                  Posted: 06/Apr/2017 by Jorge Morales
               </p>
               <p class="archive__item-excerpt" itemprop="description">In part 2 of this series of articles we will explore the first local development environment that existed for Openshift Origin and OpenShift 3.</p>
               <!--
               <p class="archive__item-excerpt" itemprop="description"><div class="paragraph">
<p>At the time OpenShift started, we realized that having a local development environment was important to make iterative development work more agile. Back then, the requirements that we had for a local development environment were pretty clear:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It needs to work on linux, mac and windows</p>
</li>
<li>
<p>It needs to be easy to run</p>
</li>
<li>
<p>It needs to be easily disposable</p>
</li>
<li>
<p>Resources used need to be adjustable</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There was an existing technology that was meeting all these requirements, Vagrant by Hashicorp. Vagrant is a tool that allows you to start a VM, from a template, and then provision/bootstrap the VM on first boot. Then you could start and stop that VM for as many times as you want/need before you discard it. This technology provided us a way to give a base VM image, based out of Centos or RHEL, that was on first boot bootstrapped to contain a full OpenShift environment.</p>
</div>
<div class="paragraph">
<p>The OpenShift evangelist team started this work and created what we called the “<strong>Origin all-in-one</strong>” which bootstrapped you an OpenShift Origin all-in-one node with additional content. This effort also started based on the necessity of the team to provide a way for developers to have a VM they could take home in order to learn OpenShift.</p>
</div>
<div class="paragraph">
<p>The effort lead to an official variant, called <strong>CDK (Container Development Kit)</strong> and supported by our Red Hat Developers Tools, that was based on Red Hat Enterprise Linux and installed the Enterprise version of OpenShift, now called OpenShift Container Platform. It provides mostly the same capabilities as the all-in-one, but the most important fact for this variant is that Red Hat supports it. You just need to subscribe the VM (free subscription for developers) and you’ll have access to our Enterprise product.</p>
</div>
<div class="paragraph">
<p>The downsides to using Vagrant is that you need to use a full Operating System VM that required an initial download of some GBs of data prior to being able to start working. Also it requires a considerable amount of resources not always easily available in the developer’s workstations or laptops.</p>
</div>
<div class="paragraph">
<p>Relying on Vagrant seemed the right approach at the time, and in the case of CDK, Red Hat invested in having a team of developers working upstream on some of the plugins used. The truth is that after some time, Vagrant seems more an abandoned project where every release breaks a feature and introduces incompatibilities with some of the versions of the hypervisors, e.g. VirtualBox which makes it complicated for the users to have it properly installed and functional.</p>
</div>
<div class="paragraph">
<p>I’m not going to explain how this approach works. If you’re interested you can just look at <a href="https://github.com/openshift-evangelists/vagrant-origin/">our docs</a>.</p>
</div>
<div class="paragraph">
<p>Even though we could admit that the Origin all-in-one VM has been very successful, it has become less and less the defacto way of running a local OpenShift instance, and it will no longer be maintained, as we have <a href="https://blog.openshift.com/goodbye-openshift-all-in-one-vm-hello-minishift/">announced</a>. But don’t be afraid, that doesn’t mean there will be no solution. In the following posts I’ll be talking about more options, so stay tuned!</p>
</div></p>
               -->
           </article>
       </div>
    
       <div class="list__item">
           <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
               <h2 class="archive__item-title" itemprop="headline"><a href="/2017/04/developing-locally-openshift-state-of-the-art/">Developing locally with OpenShift - State of the art</a></h2>
               <p class="page__meta">
                  <i class="fa fa-clock-o" aria-hidden="true"></i> 5 minutes
                  Posted: 05/Apr/2017 by Jorge Morales
               </p>
               <p class="archive__item-excerpt" itemprop="description">This is the first article of a series of blogs describing the state of the art related to local development using OpenShift as Container Application Platform</p>
               <!--
               <p class="archive__item-excerpt" itemprop="description"><div class="paragraph">
<p>OpenShift v3 launched a year and a half ago and during this time we’ve been looking at different ways to run a local OpenShift development environment on the developer’s laptop. In this series of articles I will be introducing the options we have been providing and most importantly, I will describe the evolution in our approach..</p>
</div>
<div class="paragraph">
<p>But before digging into any particular solution, we need to set the ground rules of what a local development environment is and why it is important.</p>
</div>
<div class="paragraph">
<p>OpenShift is a Cloud Container Application Platform that will usually be installed on a datacenter for enterprise grade usage. This means that developers will have access to a set of nodes that will be acting as development environment for them. As you probably know, OpenShift runs applications packaged as Docker containers, so all that is required to use the platform is the Docker images to run. How you get to these images is not relevant for OpenShift, although it provides some mechanism out of the box that makes your life easier, what is really relevant is that your Docker image is available to the platform.</p>
</div>
<div class="paragraph">
<p>As a developer, how can you make this happen? These are some options.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide source code to the platform and let the platform build it. There are 2 options:</p>
<div class="ulist">
<ul>
<li>
<p>Provide your application’s source code and let OpenShift build the Docker image using s2i.</p>
</li>
<li>
<p>Provide a Dockerfile and let OpenShift build the Docker image using a Docker build for you.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Provide just your application binary to a special image that knows how to run it. This can be done in different ways but most likely:</p>
<div class="ulist">
<ul>
<li>
<p>Provide your application binary to OpenShift and let OpenShift build a Docker image with the binary on top of an existing base image.</p>
</li>
<li>
<p>Provide your application binary as a parameter to your deployment that will use a generic Docker image and will pull it down at startup time. This goes against the model that the Docker image should container everything it needs, but still, is an option.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a Docker image and push it to the platform. There is multiple ways to create this Docker image, build it locally or in a CI server running internally or externally to openshift.</p>
</li>
<li>
<p>Pull down into the platform an existing Docker image. The only difference is that in this case, you will not be building the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>But let’s step back a little. Since we are developers, it is quite important to us how we create those Docker images. The truth is that, as developers, we will be building our application and trying it out on the environment several times during the development cycle. While doing this using a clustered platform, remote to our laptops, is probably the easiest in terms of convenience, but the truth is that for most developers, like me, this will not be enough. I will probably be building the application several times a day, sometimes tens or even hundreds of times. I will probably like to debug the running application. I will probably want to do many other things that can be summarized in:</p>
</div>
<div class="paragraph">
<p>“I want to develop applications for OpenShift as fast as I can develop an application running on my local development box”</p>
</div>
<div class="paragraph">
<p>That probably means that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>I need to be able to have the OpenShift environment as close and available to me as possible</p>
</li>
<li>
<p>I want to have a streamlined process for developing against this local OpenShift environment.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While you may not agree with what I just said, I can provide some good reasoning on why I would like this kind of development environment. Of course there’s always some drawbacks, but I think they can be overcome. Let’s start with the pros on why it is good to have an OpenShift local.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Independence of location</strong>. I no longer need to be attached to the company’s network to be able to work.</p>
</li>
<li>
<p><strong>Independence of connectivity</strong>. I will no longer require an internet connection to work. This is not always true, but is true as long as you have your dependencies and base images locally available. And this will work especially well if you integrate your image repository or source code repository into the local OpenShift. For example, this can be accomplished with Gitlab.</p>
</li>
<li>
<p><strong>Customization of the experience</strong>. I can customize the build experience so that it looks as close as possible to developing without OpenShift.</p>
</li>
<li>
<p><strong>Faster development cycle</strong>. I can iterate faster on my development, code, test, deploy, code, test, deploy, debug,&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And now, the few cons I can think of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Solutions for multiple platforms</strong>. Developers might use Windows, Linux or Mac, so the local development environment needs to run on these Operating Systems.</p>
</li>
<li>
<p><strong>Developer box resource requirements</strong>. Having a local OpenShift install means that the Developer Workstation needs to have enough resources to run it.</p>
</li>
<li>
<p><strong>Administration rights to install the tools</strong>. Sometimes we have found that developer’s workstations are standardized and they are not allowed to install additional software.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Of these cons, the first one is Red Hat’s responsibility, as we should provide a solution for local development targeting these different environments. The others are something that Enterprises will need to think about when adopting new technology. As we are already in 2017 we need to understand that developers will not be productive using low resources workstations, it’s penny-wise pound foolish. I hope that at this point in time, enterprises understand that specs for developer workstations should no longer be such a big issue.</p>
</div>
<div class="paragraph">
<p>There’s always alternatives to running a local OpenShift instance on the developer’s box, but I can not advocate for any solution that goes against the principles of test your production code as soon as possible, which for me, that means on my workstation.</p>
</div>
<div class="paragraph">
<p>Most importantly,  there is multiple ways to bring your code into an application and that application to run it in your local OpenShift developer instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Building your application and rsync the compiled code into a running container.</p>
</li>
<li>
<p>Rsync source code directly into a container when using non-compiled languages.</p>
</li>
<li>
<p>Using a maven plugin to build the images on the host and push them into you local OpenShift environment.</p>
</li>
<li>
<p>Many others&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any option you take, should mean that at the end you, as a developer, can test your application running in an OpenShift environment. If on the contrary, you build and verify/test your application in a specific way that will be different as how the application will be run in production, there’s many chances that issues might occur. This should be avoided as much as possible if you want to fully embrace DevOps and agility.</p>
</div>
<div class="paragraph">
<p>Now that I have presented the importance of having a local OpenShift environment available in your workstation, I’ll present the evolution of the “local OpenShift development environment” since we started to the present time, when I can say we have finally a really good solution that only can get better.</p>
</div>
<div class="paragraph">
<p>In the next blogs I’ll talk about the Origin all-on-one VM (and the Container Development Kit/CDK) using virtualization and Vagrant. Then I’ll move into a pure docker solution with “oc cluster up” and I’ll end up with minishift, a lightweight virtualized option.</p>
</div></p>
               -->
           </article>
       </div>
    
       <div class="list__item">
           <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
               <h2 class="archive__item-title" itemprop="headline"><a href="/2016/10/developing-locally-with-openshift/">Developing locally with OpenShift</a></h2>
               <p class="page__meta">
                  <i class="fa fa-clock-o" aria-hidden="true"></i> 12 minutes
                  Posted: 20/Oct/2016 by Jorge Morales
               </p>
               <p class="archive__item-excerpt" itemprop="description">In this blog, I'm going to describe what are my requirements when looking for a way to develop locally using OpenShift</p>
               <!--
               <p class="archive__item-excerpt" itemprop="description"><div class="paragraph">
<p>In this blog, I&#8217;m going to describe what are my requirements when looking for a way to develop locally using OpenShift, and I&#8217;ll describe a tool I have created to help me with this workflow.</p>
</div>
<div class="paragraph">
<p>First of all, I have to say that I&#8217;m not only a developer, so maybe the workflow I&#8217;m looking for is too complex, so I&#8217;m still experimenting to refine not only the workflow but also the tooling. I&#8217;ll give some comments on what I would like from my ideal tool.</p>
</div>
<div class="paragraph">
<p>Also, I need to say that this workflow is to work on OpenShift, as a developer, as an evangelist, as a product manager, as a tester, as a customer, as a user and the many roles I have throughout my day.</p>
</div>
<div class="paragraph">
<p>I&#8217;ll use oc-cluster as the name of the command to show my needs. Why I used this name? Read to the end and I&#8217;ll give you an answer and also a reason why the name will eventually change.</p>
</div>
<div class="paragraph">
<p>First, I want an easy way to start and stop an OpenShift install locally, on my laptop.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster up
oc-cluster down</code></pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;m somehow biased by some of the option names used by Vagrant, as I&#8217;ve been a Vagrant user for many years, and still am, and I think some of the command names fits really well to be self descriptive.</p>
</div>
<div class="paragraph">
<p>One important thing for me is that the cluster I create will survive multiple days, as I will be using it for a while, so I need it to be persistent. That means that if I need a new cluster, I&#8217;ll have to delete the current one, with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster destroy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another important factor for me as I&#8217;m multitasked, is to be able to have different clusters, with different stuff, that I can switch between them at will, so I have used the term <strong>profile</strong> for this, and when starting, stoping and destroying a cluster I can use the profile name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster up java
oc-cluster down
oc-cluster up demo
oc-cluster down
oc-cluster destroy demo</code></pre>
</div>
</div>
<div class="paragraph">
<p>While I can have everything in one single cluster, in different projects, if I end up adding a lot of applications to a cluster, the amount of resources I would use, and the time it would take to start would be high, so I&#8217;d rather split my clusters into different responsibilities. I can create a cluster for Java development, configure it with a nexus artifact repository manager, and have templates configured to always use nexus, or have a buildOverrides for that. If I started a demo cluster, I would not be interfered by the work I do as a Java developer.</p>
</div>
<div class="paragraph">
<p>Next, as there can be multiple profiles, I need a way to know what profiles I have created, so I can pass the appropriate name to the <strong>up</strong> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster list</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, it&#8217;s very important to know if I already have a cluster up and running and which cluster is it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster status</code></pre>
</div>
</div>
<div class="paragraph">
<p>So far, this is a basic workflow to start and stop, create and destroy, list and status the clusters I have.</p>
</div>
<div class="paragraph">
<p>One important note is that since the create and start command is the same, the command needs to make sure that the first time is invoked will create the cluster, but the subsequent calls will just bring it up, and not do any creational steps.</p>
</div>
<div class="paragraph">
<p>Now, some of the needs that as a developer on OpenShift I have are to work with persistence volumes, so there are helper commands that helps on that goal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster create-volume volumeName [size|10Gi] [path|$HOME/.oc/profiles/{profile}/volumes/{volumeName}]
oc-cluster create-shared-volume project/volumeName [size|10Gi] [path|$HOME/.oc/volumes/{volumeName}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first command will create an OpenShift PV, that is only available to the profile in use, that means that whenever I destroy the cluster represented by that profile, all the date stored in that volume will be removed as well. Like every developer, I expect that all the defaults are good enough for me to use, so I limit the amount of required params to just the name. This could also be reduced to use random names, and it&#8217;s something I&#8217;ll think about.</p>
</div>
<div class="paragraph">
<p>The second command, bring the difference that provides a shared storage between clusters. This way I can mount the same volume on multiple clusters. The main use case I have so far is to be used by persistent applications that I use in many clusters and that are used as infrastructure type of services. A good example for this is nexus artifact repository manager, where I want every dependency that I have already pulled down to be available to every cluster I use.</p>
</div>
<div class="paragraph">
<p>Also, talking about OpenShift, I will probably want to get into the OpenShift runner. What I mean with the OpenShift runner is the place where OpenShift is actually running, whether this is a VM or a docker container, and I want to do this in a consistent way and in a way that I will understand. For this I use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster ssh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, I&#8217;ll talk about some of the problems that my clusters could suffer and some solutions to those:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding functionality to the tool.</p>
</li>
<li>
<p>Bootstrapping users</p>
</li>
<li>
<p>Bootstrapping the cluster</p>
<div class="ulist">
<ul>
<li>
<p>Configuration bootstrap</p>
</li>
<li>
<p>Deployments bootstrap</p>
</li>
</ul>
</div>
</li>
<li>
<p>Reproducibility</p>
</li>
<li>
<p>Packaging/Transport</p>
</li>
<li>
<p>Using proxies</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>I&#8217;ll try to dive into all these topics, one by one.</p>
</div>
<div class="sect1">
<h2 id="_adding_functionality_to_the_tool">Adding functionality to the tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes I find that what I can do, or what I want to do, is not covered by the tool, and I understand that also my use case can be quite different from other&#8217;s use cases. To solve this, the tool needs to support the ability to provide plugins that will help on different tasks. These tasks can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bootstrapping tasks. Adding stuff to the cluster. Whether it&#8217;s configuration or deployments.</p>
</li>
<li>
<p>New commands. Having commands that extend how the tool works, and that are not considered bootstrapping but more management.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bootstrapping_users">Bootstrapping users</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Users is a key part of local development environments, but it&#8217;s more important when you want to use the local development environment for demos, as you&#8217;ll probably want to have different users, with different roles and belonging to different projects, so you can show things like application promotions, or the difference way of working of a developer compared to an administrator.
For me, one of the most important parts, now that it is possible, is to have my regular user act as a <strong>sudoer</strong>, so I can just execute admin commands if I need to without needing to change user.</p>
</div>
<div class="paragraph">
<p>This can be done by adding your user the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc adm policy add-cluster-role-to-user sudoer developer</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
My user is developer.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Also, I will probably need to log in as administrator to the web interface, so I need a full user with cluster-admin role.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc adm policy add-cluster-role-to-user cluster-admin admin</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This action needs to be done as a system:admin, but the tooling we&#8217;ve built take care of this.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Additionally I want to be able to create/delete users, and force them roles, so I can bootstrap a demo cluster for things like application promotions. I need some simple commands that will be able to bootstrap whatever is needed for me, no matter what underlying identity provider is used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster create-user {username} {role} [{project}]
oc-cluster remove-user {username}
oc-cluster login {username}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll probably be wondering why there&#8217;s a login and logout commands. This are needed as usually one can have multiple clusters created, with the same configuration, but sadly every cluster you create will have it&#8217;s own self signed certificates for authenticating. There&#8217;s a need to set in the local oc context the proper cluster and certificates, to avoid errors. This is handled by the <strong>login</strong> command. As this is a <strong>local</strong> environment, security is not much of a concern, and passwords can be generalized.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bootstrapping_the_cluster">Bootstrapping the cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Following with the things that need to be done are the need to provide some bootstrapping for the clusters, as there will be things I will need always to be provisioned/available in certain clusters.
For this, I think that it&#8217;s important to have 2 possibilities, when creating clusters. First of all, is to blueprinting a cluster, so that every time you create a cluster with a certain blueprint, all the bootstrapping will be provided. And additionally, there needs to be a way to bootstrap one-shot clusters, for things you don&#8217;t want so frequently.</p>
</div>
<div class="paragraph">
<p>To these, you have blueprints, that will be executed on cluster first bootstrap:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster up {profile_name} {blueprint}
oc-cluster up demo pipelines-demo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or you can do the provisioning afterwards, as a one-shot, as this will be executed in the same way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster provision {blueprint}</code></pre>
</div>
</div>
<div class="paragraph">
<p>How do you know what blueprints you have?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster blueprints-list</code></pre>
</div>
</div>
<div class="paragraph">
<p>All blueprints can be made composable, so there can be a repository with single actions (enable-pipelines, add-user, add-project, deploy-app) or a composed action (pipelines-demo,msa-demo,&#8230;&#8203;)</p>
</div>
<div class="sect2">
<h3 id="_configuration_bootstrap">Configuration bootstrap</h3>
<div class="paragraph">
<p>Configuration bootstrapping is the one that requires changes in master or node config&#8217;s file or any other configuration file and that probably will require a restart of the OpenShift process.</p>
</div>
</div>
<div class="sect2">
<h3 id="_deployments_bootstrap">Deployments bootstrap</h3>
<div class="paragraph">
<p>Deployments bootstrap does not require to restart any process as it will only interact with OpenShift deployable resources, like projects, users, services, routes, deployments, and off course, pulling down all the required images.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reproducibility">Reproducibility</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the most important things when developing is that you know that at some point we can screw our environment, and will need to start over. There&#8217;s times where we know the action we&#8217;re going to do can be problematic, and we could probably make a safe point, so if we do something wrong, we can easily revert back the state. This is easy if you just save the configuration to be able to revert back.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster snapshot-save</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the event of a problem, you&#8217;ll might want to go back to a safe configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster snapshot-list
oc-cluster snapshot-restore {snapshot-id}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For simplicity, snapshots are made only on running clusters, but can be restored if there&#8217;s no running cluster or the cluster running is the one for the snapshot.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This concept of making save points can be greatly extended, and also is prone to errors if when you restore an environment some images are no longer available. This problem is mostly for self built images.
One extension to this concept is having the ability to provide local snapshots, that will be removed if the cluster is removed, and global snapshots, that can be used to recreate a cluster at any moment, and could be made transportable. And this leads us to our next topic.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_packaging_transport">Packaging/Transport</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Packaging of a cluster is a concept very important for when doing workshops. I do want 40 people in a room to have the exact same thing so I can teach them a lesson and they can experiment themselves. For this, there&#8217;s no easy solution, but as long as they have the tooling, a full cluster can be fully automated for a workshop. How?</p>
</div>
<div class="paragraph">
<p>Providing a download link that will do the installation/bootstrapping of all the needed things, a-la installer. So really there&#8217;s no transport, but there&#8217;s a way to bootstrap the same package for everyone.</p>
</div>
<div class="paragraph">
<p>This, that sounds really cool and easy, it&#8217;s the most complex of all the tasks, and it is mainly because of the variety of operating systems existing out there. If I just had to focus on mac and linux, it could be very simple, but having to also support windows users it becomes an impossible. At least for me. Hence this requirement is not yet fulfilled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster install {URL}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_proxies">Using proxies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>And last but not least, the support for proxies. This one, that seems easy, is also one of the most complex topics, and this is mostly because the support that OpenShift provides for proxies is not transportable. I&#8217;ll explain myself better. As a developer, I might need to work some time at the office, where I have a proxy to access the internet. At home I might not need the proxy. This scenario is not easily solved in OpenShift, where you&#8217;d need to play with ENV variables being set/unset for every build/deployment every time you move in or out.</p>
</div>
<div class="paragraph">
<p>My idea would be something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">oc-cluster enable-proxy {proxy}
oc-cluster disable-proxy</code></pre>
</div>
</div>
<div class="paragraph">
<p>But as easy as it looks, I haven&#8217;t figured out yet if this is possible, and how.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_existing_tooling">Existing tooling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As I said at the beginning, I&#8217;m using a command called <strong>oc-cluster</strong> and it&#8217;s because it uses internally OpenShift&#8217;s <strong>oc</strong> client tool and the <strong>cluster</strong> option. I found this <strong>oc cluster</strong> a good way to bootstrap and use a cluster locally on my <strong>mac</strong> but even on <strong>linux</strong> as it can use Docker native. If you decide to use <strong>docker-machine</strong> my command will not work. There&#8217;s many advantages to using docker locally, but there&#8217;s also some disadvantages. Hopefully the disadvantages can be easily solved but the advantages can not be easily taken with other approaches, as when using <strong>docker-machine</strong>.</p>
</div>
<div class="paragraph">
<p>Advantages I see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can use your local file system for persistent volumes.</p>
</li>
<li>
<p>You don&#8217;t have a virtualization layer.</p>
</li>
<li>
<p>Image are directly available to all the clusters once pulled.</p>
</li>
<li>
<p>You can share volumes between different clusters, even if they are not running.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Disadvantages I see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Packaging and transportation with VM could be made easy, but then, there&#8217;s many virtualization out there to make it work on all, or the most important.</p>
</li>
<li>
<p>Removal of built images is easier, as the images are built into the VM. Deleting the VM, deletes all built images. This can also be solved with the tooling, as there is a feature coming that will provide labels to the images created, so every cluster will label their images. Removing the cluster, will remove their images.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Probably there&#8217;s more, but these are the ones I can think of right now.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are some options out there, some of them more portable, but also, less flexible. As I&#8217;m developing this tool just for me, I focus on something that will work for me, but as I think that most of what works for me could be made work for anyone, I&#8217;m here sharing these thoughts with you.</p>
</div>
<div class="paragraph">
<p>Options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>CDK, ADB</strong>: Using Virtualization through Vagrant and using vagrant plugins. It&#8217;s portable but very heavy weight and outdated.</p>
</li>
<li>
<p><strong>OpenShift.org All-in-one</strong>: Same as before. Although it&#8217;s up to date and it doesn&#8217;t use plugins it&#8217;s heavyweight. Even I&#8217;m the author of it, I know it has many limitations, and I&#8217;m just limiting the use of it to those use cases I can not still cover, like doing workshops with Windows users :-(</p>
</li>
<li>
<p><strong>Minishift</strong>: It uses lightweight virtualization, but still don&#8217;t provide many of the additional features I need. I would used it and extend it, but since it&#8217;s written in go, I can not contribute to it. I find this a great option, probably the best. Although I don&#8217;t like the name of the commands used, I think will be the way to move forward, and also it is based on <strong>minikube</strong>, which seems to have adoption on <strong>Kubernetes</strong> community, which is also great. The maintainer is a great guy.</p>
</li>
<li>
<p><strong>Plain oc cluster</strong>: This provides a great foundation, but in no way is something usable per se for developers. Just having a default that makes configuration ephemeral is something that for a developer is not interesting. But as the tool is a great cluster bootstrapper, I use it, and try to ask for features that will make developer&#8217;s use case through our tool more interesting and easy. Also the maintainer is a great guy.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_final_comments">Final comments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I love OpenShift, I love Kubernetes. I think it is a great platform to run your containers at scale, but I still see that for developers there&#8217;s a steep learning and usability curve. I hope that one day, Java developers (well really any developer) will deploy locally on Kubernetes/OpenShift and not plain docker. Also that they keep developing in plain Java, using their IDEs, building their artifacts or images however they want (s2i, docker build on OpenShift or maven and docker build locally), but that the proces it&#8217;s easy for them to use.
I think that for them to adopt a platform like this, the development process needs to be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Easy. Not many additional steps to use the local platform.</p>
</li>
<li>
<p>Fast. It needs to be as fast as without using the local platform.</p>
</li>
<li>
<p>Integrated. They can use the same tools to work on their local platform.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is one of the required steps to have an environment (local platform) to use. Following should be to be easy to collaborate between your local and remote environments. But that, should be the topic of another post.</p>
</div>
<div class="paragraph">
<p>As always, if you want to comment, please use tweeter.</p>
</div>
<div class="paragraph">
<p>Download the <strong><a href="https://github.com/openshift-evangelists/oc-cluster-wrapper">oc-cluster</a></strong></p>
</div>
</div>
</div></p>
               -->
           </article>
       </div>
    
</div>

    </div>

    <div class="page__footer">
        <footer>
            <!-- start custom footer snippets -->
            <!-- end custom footer snippets -->
            <div class="page__footer-follow">
                <ul class="social-icons">
                    <li><strong>Follow:</strong></li>
                    <li><a href="https://twitter.com/UnPOUcoDe"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
                    <li><a href="/atom.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
                </ul>
            </div>
            <div class="page__footer-copyright">&copy; 2016 Jorge Morales Pou.</div>
        </footer>
    </div>
    <script src="/js/main.min.js"></script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-81343831-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
</body>

</html>
